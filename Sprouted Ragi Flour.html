<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ammu Organics Sprouted Ragi Flour | Superfood Millet Flour | Nutrient-Rich & Digestible</title>
  <meta name="description" content="Ammu Organics Sprouted Ragi Flour ‚Äî premium sprouted finger millet flour. Highly digestible, calcium-rich superfood for rotis, dosas & baby food." />
  <meta name="keywords" content="sprouted ragi flour, ragi malt, finger millet flour, ammu organics, sprouted millet, superfood flour, calcium rich" />

  <!-- Open Graph -->
  <meta property="og:title" content="Ammu Organics Sprouted Ragi Flour" />
  <meta property="og:description" content="Sprouted ragi flour ‚Äî super digestible, calcium-rich millet superfood for all ages." />
  <meta property="og:image" content="images/ragi1.jpg" />
  <meta property="og:type" content="product" />

  <!-- JSON-LD Product -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "name":"Ammu Organics Sprouted Ragi Flour",
    "image":[
      "images/ragi1.jpg",
      "images/ragi2.jpg",
      "images/ragi3.jpg",
      "images/ragi4.jpg",
      "images/ragi5.jpg"
    ],
    "description":"Premium sprouted ragi (finger millet) flour ‚Äî highly digestible superfood rich in calcium & iron.",
    "sku":"AO-SRF-001",
    "brand":{"@type":"Brand","name":"Ammu Organics"},
    "offers":{"@type":"Offer","url":"https://example.com/SproutedRagiFlour.html","priceCurrency":"INR","price":"240.00","availability":"https://schema.org/InStock"}
  }
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{--green:#2f6f4e;--olive:#6b8a65;--beige:#fbf6ef;--accent:#c19a6b;--muted:#6b6b6b;--radius:12px;--max:1100px}
    *{box-sizing:border-box}
    body{font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,var(--beige),#fff);color:#163222;margin:0}
    a{color:inherit}
    .container{max-width:var(--max);margin:0 auto;padding:28px}

    header{position:fixed;left:0;right:0;top:0;z-index:60;background:rgba(255,255,255,0.98);backdrop-filter:blur(6px);box-shadow:0 6px 18px rgba(0,0,0,0.05)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 22px}
    .brand{display:flex;align-items:center;gap:12px;cursor:pointer}
    .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--green),var(--olive));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .site-title{font-weight:700}
    nav a{margin-left:14px;font-weight:600}
    .cta{padding:8px 14px;border-radius:10px;background:var(--accent);color:#fff}
    main{padding-top:96px}

    .product-wrap{margin-top:60px;display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:start}
    @media (max-width:1000px){.product-wrap{grid-template-columns:1fr;padding:18px}}

    .gallery{background:#fff;border-radius:var(--radius);padding:14px;box-shadow:0 10px 28px rgba(0,0,0,0.06)}
    .media-stage{width:100%;height:420px;overflow:hidden;border-radius:10px;position:relative;background:#f6f6f6;display:flex;align-items:center;justify-content:center}
    .media-stage img,.media-stage video{width:100%;height:100%;object-fit:cover;display:block}
    .thumbs{display:flex;gap:10px;margin-top:12px;overflow:auto;padding-bottom:6px}
    .thumbs button{border:2px solid transparent;padding:0;border-radius:8px;background:transparent;cursor:pointer}
    .thumbs img{width:96px;height:64px;object-fit:cover;border-radius:6px;display:block}
    .thumbs button.active{border-color:var(--green)}
    .nav-arrows{position:absolute;top:50%;left:12px;right:12px;display:flex;justify-content:space-between;transform:translateY(-50%);pointer-events:none}
    .nav-arrows button{pointer-events:auto;background:rgba(255,255,255,0.85);border:none;padding:8px;border-radius:8px;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.08)}

    .details{background:#fff;border-radius:var(--radius);padding:18px;box-shadow:0 10px 24px rgba(0,0,0,0.06)}
    .details h1{font-size:20px;margin:0 0 6px}
    .meta{color:var(--muted);font-size:14px}
    .price{font-size:22px;color:var(--green);font-weight:700;margin:12px 0}

    .variants{display:flex;gap:8px;margin:12px 0;flex-wrap:wrap}
    .variant{padding:10px 14px;border-radius:10px;border:1px solid #e6e6e6;background:#fff;cursor:pointer}
    .variant.selected{border-color:var(--green);background:rgba(47,111,78,0.06)}

    .qty{display:flex;align-items:center;gap:8px;margin-top:12px}
    .qty button{padding:8px 12px;border-radius:8px;border:1px solid #ddd;background:#fff;cursor:pointer}
    .qty input{width:64px;text-align:center;padding:8px;border-radius:8px;border:1px solid #eee}

    .buy-row{display:flex;gap:12px;margin-top:14px}
    .btn-buy{background:var(--green);color:#fff;padding:12px 18px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .btn-cart{background:#fff;border:2px solid var(--green);padding:10px 14px;border-radius:10px;color:var(--green);cursor:pointer}

    .panel{background:#fff;border-radius:12px;padding:14px;box-shadow:0 8px 20px rgba(0,0,0,0.04);margin-top:18px}
    .field{display:flex;flex-direction:column;margin-bottom:10px}
    label{font-size:13px;margin-bottom:6px;color:var(--muted)}

    .cart-btn{position:fixed;right:18px;bottom:18px;background:var(--green);color:#fff;padding:12px 16px;border-radius:999px;border:none;box-shadow:0 10px 30px rgba(0,0,0,0.12);cursor:pointer;z-index:80}
    .cart-drawer{position:fixed;right:0;top:0;height:100vh;width:420px;background:#fff;box-shadow:-12px 0 40px rgba(0,0,0,0.12);transform:translateX(110%);transition:transform .28s ease;z-index:90;padding:20px;overflow:auto}
    .cart-drawer.open{transform:translateX(0)}
    .cart-item{display:flex;gap:10px;border-bottom:1px dashed #eee;padding:10px 0}
    .cart-summary{background:#fafafa;padding:12px;border-radius:8px;margin-top:10px}

    .tabs{margin-top:16px}
    .tab-buttons{display:flex;gap:8px;flex-wrap:wrap}
    .tab-buttons button{padding:8px 12px;border-radius:8px;border:1px solid #e6e6e6;background:#fff;cursor:pointer}
    .tab-buttons button.active{background:linear-gradient(90deg,#fff,#f6f2e9);border-color:var(--green)}
    .tab-content{background:#fff;padding:16px;border-radius:8px;margin-top:12px;box-shadow:0 8px 20px rgba(0,0,0,0.04)}

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:700px){.grid-2{grid-template-columns:1fr}.cart-drawer{width:95vw}}

    footer{padding:18px;text-align:center;color:var(--muted);font-size:14px;margin-top:40px}
    .small{font-size:13px;color:var(--muted)}
    .btn-ghost{background:#fff;border:1px solid #ddd;padding:8px;border-radius:8px;cursor:pointer}
    .discount { margin-top:10px; padding:8px; background:#f0fff4; border-radius:8px; color:var(--green); font-weight:600; }
  </style>
</head>
<body>

<header>
  <div class="container nav">
    <div class="brand" id="brandLogo" role="link" aria-label="Ammu Organics Home">
      <div class="logo">AO</div>
      <div>
        <div class="site-title">Ammu Organics</div>
        <div style="font-size:12px;color:var(--muted)">Pure. Natural. Honest.</div>
      </div>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="index.html#products">Products</a>
      <a href="index.html#contact" class="cta">Contact</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="product-wrap" aria-labelledby="productTitle">

    <!-- Gallery -->
    <div class="gallery" aria-label="Product media gallery">
      <div class="media-stage" id="mediaStage"></div>

      <div class="nav-arrows">
        <button id="prevBtn" aria-label="Previous media">‚Äπ</button>
        <button id="nextBtn" aria-label="Next media">‚Ä∫</button>
      </div>

      <div class="thumbs" id="thumbs" role="tablist" aria-label="Product thumbnails"></div>
    </div>

    <!-- Details -->
    <aside class="details">
      <h1 id="productTitle">Ammu Organics Sprouted Ragi Flour | Superfood Millet Flour</h1>
      <div class="meta">Sprouted Finger Millet ‚Ä¢ Calcium-Rich ‚Ä¢ Highly Digestible ‚Ä¢ Superfood</div>
      <div class="price" id="priceDisplay">‚Çπ240.00</div>

      <p class="meta">Premium sprouted ragi flour from finger millet grains. Sprouting enhances digestibility & nutrient absorption ‚Äî perfect for rotis, dosas, malt & baby food.</p>

      <!-- Variants -->
      <div style="margin-top:12px;font-weight:700">Choose size</div>
      <div class="variants" id="variants">
        <button class="variant selected" data-sku="SRF500" data-price="240">500 g</button>
        <button class="variant" data-sku="SRF1000" data-price="450">1 kg</button>
        <button class="variant" data-sku="SRF2000" data-price="850">2 kg</button>
      </div>

      <!-- Quantity & Buy -->
      <div class="qty" aria-label="Quantity selector">
        <button id="decQty" aria-label="Decrease quantity">-</button>
        <input type="number" id="qtyInput" value="1" min="1" aria-label="Order quantity" />
        <button id="incQty" aria-label="Increase quantity">+</button>
      </div>

      <div class="discount" id="discountInfo" style="display:none"></div>

      <div class="buy-row">
        <button class="btn-buy" id="buyNow">Buy Now</button>
        <button class="btn-cart" id="addCart">Add to Cart</button>
      </div>

      <div style="margin-top:12px;color:var(--muted);font-size:13px">SKU: <span id="skuDisplay">SRF500</span> ‚Ä¢ Free shipping on orders over ‚Çπ999 (Tamil Nadu)</div>

      <!-- Customer details (used for shipping & WhatsApp) -->
      <div class="panel" id="customerPanel">
        <h3 style="margin:0 0 8px">Customer details</h3>
        <div class="field"><label for="custName">Full name</label><input id="custName" placeholder="Your name" /></div>
        <div class="field"><label for="custPhone">Phone (with country code) e.g. 9196xxxxxxxx</label><input id="custPhone" placeholder="919629575552" /></div>

        <div class="field"><label for="country">Country</label>
          <select id="country">
            <option value="India" selected>India</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div class="field"><label for="state">State / Region</label>
          <select id="state">
            <option value="Tamil Nadu">Tamil Nadu</option>
            <option value="Kerala">Kerala</option>
            <option value="Karnataka">Karnataka</option>
            <option value="Andhra Pradesh">Andhra Pradesh</option>
            <option value="Telangana">Telangana</option>
            <option value="Other">Other (Rest of India / Abroad)</option>
          </select>
        </div>

        <div class="field"><label for="city">Town / City</label><input id="city" placeholder="Chennai / Coimbatore / etc." /></div>
        <div class="field"><label for="pincode">Pincode / ZIP</label><input id="pincode" placeholder="600xxx" /></div>
        <div class="field"><label for="address">Full address</label><textarea id="address" rows="2" placeholder="House, street, landmark"></textarea></div>

        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn-ghost" id="calcShippingBtn">Calculate Shipping</button>
          <div class="small" id="shippingInfo" style="margin-left:auto">Shipping: ‚Äî</div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <div class="tab-buttons" role="tablist" aria-label="Product details tabs">
          <button class="active" data-tab="about">More Details</button>
          <button data-tab="features">Key Features</button>
          <button data-tab="benefits">Benefits & Uses</button>
          <button data-tab="how">How to Use</button>
        </div>

        <div class="tab-content" id="tabContent">
          <div data-panel="about">
            <h3 style="margin-top:0">About the Product</h3>
            <p>Ammu Organics Sprouted Ragi Flour is made from premium finger millet grains carefully sprouted to enhance digestibility and nutrient bioavailability. Perfect superfood flour.</p>
            <ul>
              <li>Ingredients: 100% Sprouted Ragi (Finger Millet)</li>
              <li>Sprouting reduces anti-nutrients naturally</li>
              <li>Shelf life: 12 months (store cool & dry)</li>
            </ul>
          </div>

          <div data-panel="features" style="display:none">
            <h3>Key Features</h3>
            <ul>
              <li>100% Sprouted Ragi Flour</li>
              <li>Highly digestible</li>
              <li>Rich earthy aroma</li>
              <li>Fine texture for smooth batters</li>
              <li>Enzyme-activated nutrition</li>
            </ul>
          </div>

          <div data-panel="benefits" style="display:none">
            <h3>Benefits & Uses</h3>
            <div class="grid-2">
              <div>
                <h4>Cooking</h4>
                <ul>
                  <li>Ragi roti & dosa</li>
                  <li>Ragi malt & porridge</li>
                  <li>Baby food & weaning</li>
                </ul>
              </div>
              <div>
                <h4>Health</h4>
                <ul>
                  <li>Calcium-rich (344mg/100g)</li>
                  <li>Iron & protein packed</li>
                  <li>Diabetes-friendly</li>
                </ul>
              </div>
            </div>
          </div>

          <div data-panel="how" style="display:none">
            <h3>How to Use</h3>
            <h4>Ragi Malt (1 serving)</h4>
            <p>2 tbsp sprouted ragi flour + 1 cup water + 1 tsp jaggery. Cook till thick. Add milk & cardamom.</p>
            <h4>Ragi Roti</h4>
            <p>1 cup ragi flour + ¬Ω cup hot water + pinch salt. Knead, roll thin, cook on tawa.</p>
            <h4>Storage Tips</h4>
            <p>Store airtight in cool place. Use dry spoon. Refrigeration extends freshness.</p>
          </div>
        </div>
      </div>

    </aside>
  </section>

  <!-- Why Choose -->
  <section style="margin-top:18px">
    <div class="container">
      <h2 style="text-align:left">Why Choose Ammu Organics Sprouted Ragi Flour?</h2>
      <p style="color:var(--muted)">Sprouting process makes nutrients 4x more bioavailable than regular ragi flour ‚Äî superior digestion & health benefits for all ages.</p>
    </div>
  </section>

</main>

<!-- Cart drawer -->
<button class="cart-btn" id="openCart">Cart üõí (<span id="cartCount">0</span>)</button>
<aside class="cart-drawer" id="cartDrawer" aria-hidden="true">
  <h3>Cart</h3>
  <div id="cartItems"></div>
  <div class="cart-summary" id="cartSummary">
    <div>Subtotal: ‚Çπ<span id="cartSubtotal">0</span></div>
    <div>Discount: -‚Çπ<span id="cartDiscount">0</span></div>
    <div>Shipping: ‚Çπ<span id="cartShipping">0</span></div>
    <div style="font-weight:700;margin-top:8px">Total: ‚Çπ<span id="cartTotal">0</span></div>
    <div style="margin-top:10px;display:flex;gap:8px">
      <button id="checkoutWhatsApp" class="btn-buy" style="flex:1">Checkout via WhatsApp</button>
      <button id="clearCart" class="btn-ghost" style="flex:0 0 auto">Clear</button>
    </div>
  </div>
  <div style="margin-top:10px"><button id="closeCart" class="btn-ghost">Close</button></div>
</aside>

<footer>
  <div class="container">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <div>¬© 2025 Ammu Organics. All Rights Reserved. | Made with ‚ù§Ô∏è in India</div>
      <div style="color:var(--muted)">üìû 9629575552 | üìß <a href="mailto:ammuorganicfood@gmail.com">ammuorganicfood@gmail.com</a> | <a href="https://www.instagram.com/ammuorganics8888/" target="_blank">@ammuorganics8888</a></div>
    </div>
  </div>
</footer>

<script>
/* ====== Media (SEO filenames + alt text) ====== */
const slides = [
  {type:'image', src:'images/ragi1.jpg', alt:'ammu organics sprouted ragi flour superfood millet calcium rich'},
  {type:'image', src:'images/ragi2.jpg', alt:'sprouted ragi flour fine texture closeup nutrient dense'},
  {type:'image', src:'images/ragi3.jpg', alt:'ragi grains sprouting process ammu organics seo'},
  {type:'image', src:'images/ragi4.jpg', alt:'sprouted ragi flour packaging glass jar premium'},
  {type:'image', src:'images/ragi5.jpg', alt:'finger millet closeup sprouted ragi superfood'},
  {type:'video', src:'videos/ragi.mp4', poster:'images/ragi5.jpg', alt:'ammu organics sprouted ragi flour preparation video'}
];

const mediaStage = document.getElementById('mediaStage');
const thumbs = document.getElementById('thumbs');
let current = 0;
let autoSlideTimer = null;

function renderThumbs(){
  thumbs.innerHTML = '';
  slides.forEach((s,i)=>{
    const btn = document.createElement('button');
    btn.dataset.index = i;
    btn.setAttribute('aria-label', s.type + ' ' + (i+1));
    const img = document.createElement('img');
    img.src = s.type === 'video' ? (s.poster || slides[0].src) : s.src;
    img.alt = s.alt || '';
    btn.appendChild(img);
    btn.addEventListener('click', ()=>{ goTo(i); resetAutoSlide(); });
    thumbs.appendChild(btn);
  });
}
function renderMedia(idx){
  mediaStage.innerHTML = '';
  const s = slides[idx];
  if(s.type === 'video'){
    const v = document.createElement('video');
    v.src = s.src; v.controls = true; v.playsInline = true; v.preload = 'metadata';
    if(s.poster) v.setAttribute('poster', s.poster);
    mediaStage.appendChild(v);
  } else {
    const img = document.createElement('img');
    img.src = s.src; img.alt = s.alt || '';
    mediaStage.appendChild(img);
  }
  thumbs.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
  const active = thumbs.querySelector('button[data-index="'+idx+'"]');
  if(active) active.classList.add('active');
}
function goTo(idx){ if(idx<0) idx=slides.length-1; if(idx>=slides.length) idx=0; current=idx; renderMedia(current); }
function next(){ goTo(current+1); }
function prev(){ goTo(current-1); }
function startAutoSlide(){ stopAutoSlide(); autoSlideTimer=setInterval(()=>next(),4000); }
function stopAutoSlide(){ if(autoSlideTimer) clearInterval(autoSlideTimer); }
function resetAutoSlide(){ startAutoSlide(); }

document.getElementById('nextBtn').addEventListener('click', ()=>{ next(); resetAutoSlide(); });
document.getElementById('prevBtn').addEventListener('click', ()=>{ prev(); resetAutoSlide(); });
let touchStartX=0;
mediaStage.addEventListener('touchstart', e=>{ touchStartX=e.changedTouches[0].screenX; stopAutoSlide(); });
mediaStage.addEventListener('touchend', e=>{ const diff=e.changedTouches[0].screenX-touchStartX; if(diff>40) prev(); else if(diff<-40) next(); startAutoSlide(); });

renderThumbs(); goTo(0); startAutoSlide();

/* ====== Variants + Price + SKU ====== */
const variantsEl = document.getElementById('variants');
const priceDisplay = document.getElementById('priceDisplay');
const skuDisplay = document.getElementById('skuDisplay');
let selectedVariant = variantsEl.querySelector('.variant.selected');

variantsEl.addEventListener('click', e=>{
  const v = e.target.closest('.variant'); if(!v) return;
  variantsEl.querySelectorAll('.variant').forEach(x=>x.classList.remove('selected'));
  v.classList.add('selected');
  selectedVariant = v;
  priceDisplay.textContent = '‚Çπ' + v.dataset.price + '.00';
  skuDisplay.textContent = v.dataset.sku;
  updateShippingInfo();
  updateDiscountInfo();
});

/* ====== Quantity controls ====== */
const decBtn = document.getElementById('decQty');
const incBtn = document.getElementById('incQty');
const qtyInput = document.getElementById('qtyInput');

decBtn.addEventListener('click', ()=>{ qtyInput.value = Math.max(1, parseInt(qtyInput.value||1)-1); updateShippingInfo(); updateDiscountInfo(); });
incBtn.addEventListener('click', ()=>{ qtyInput.value = Math.max(1, parseInt(qtyInput.value||1)+1); updateShippingInfo(); updateDiscountInfo(); });
qtyInput.addEventListener('input', ()=>{ if(parseInt(qtyInput.value||0)<1) qtyInput.value=1; updateShippingInfo(); updateDiscountInfo(); });

/* ====== Tabs ====== */
const tabButtons = document.querySelectorAll('.tab-buttons button');
const panels = document.querySelectorAll('[data-panel]');
document.querySelector('.tab-buttons').addEventListener('click', e=>{
  const b = e.target.closest('button'); if(!b) return;
  tabButtons.forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
  const tab = b.dataset.tab;
  panels.forEach(p=>{ p.style.display = p.getAttribute('data-panel')===tab ? 'block' : 'none'; });
});

/* ====== Shipping calculator ====== */
const calcShippingBtn = document.getElementById('calcShippingBtn');
const shippingInfo = document.getElementById('shippingInfo');

function perUnitShippingByState(state){
  if(state === 'Tamil Nadu') return 60;
  if(['Kerala','Karnataka','Andhra Pradesh','Telangana'].includes(state)) return 80;
  return 120;
}

function getSubtotalAndQty(){
  const price = Number(selectedVariant.dataset.price);
  const qty = Math.max(1, Number(qtyInput.value));
  const subtotal = price * qty;
  return {subtotal, qty};
}

function computeShipping(subtotal, totalQty){
  const state = document.getElementById('state').value;

  if (state === 'Tamil Nadu') {
    if (subtotal >= 999) return 0;
    return 60 * totalQty;
  }

  if (['Kerala','Karnataka','Andhra Pradesh','Telangana'].includes(state)) {
    return 80 * totalQty;
  }

  return 120 * totalQty;
}

function updateShippingInfo(){
  const {subtotal, qty} = getSubtotalAndQty();
  const ship = computeShipping(subtotal, qty);
  shippingInfo.textContent = ship === 0 ? 'Shipping: Free' : 'Shipping: ‚Çπ' + ship;
}
calcShippingBtn.addEventListener('click', updateShippingInfo);

/* ========== Discount System ========== */
const discountInfo = document.getElementById('discountInfo');

function calculateDiscount(subtotal, qty){
  let discount = 0;
  if (subtotal >= 1999) discount = subtotal * 0.08;
  else if (qty >= 3) discount = subtotal * 0.05;
  return Math.round(discount);
}

function updateDiscountInfo(){
  const {subtotal, qty} = getSubtotalAndQty();
  const discount = calculateDiscount(subtotal, qty);
  if (discount > 0){
    discountInfo.style.display = 'block';
    discountInfo.textContent = `Discount applied: ‚Çπ${discount} (best available)`;
  } else {
    discountInfo.style.display = 'none';
    discountInfo.textContent = '';
  }
}

/* ========== CART SYSTEM ========== */
let cart = [];

const cartBtn = document.getElementById('openCart');
const cartDrawer = document.getElementById('cartDrawer');
const cartItems = document.getElementById('cartItems');
const cartSubtotalEl = document.getElementById('cartSubtotal');
const cartDiscountEl = document.getElementById('cartDiscount');
const cartShippingEl = document.getElementById('cartShipping');
const cartTotalEl = document.getElementById('cartTotal');
const cartCount = document.getElementById('cartCount');

document.getElementById('closeCart').addEventListener('click', () => {
  cartDrawer.classList.remove('open');
});
cartBtn.addEventListener('click', () => {
  cartDrawer.classList.add('open');
});

function renderCart(){
  cartItems.innerHTML = '';
  let subtotal = 0;
  let totalQty = 0;

  cart.forEach((item, index) => {
    subtotal += item.price * item.qty;
    totalQty += item.qty;

    const div = document.createElement('div');
    div.className = 'cart-item';
    div.innerHTML = `
      <img src="${item.image || 'images/ragi1.jpg'}" width="70" style="border-radius:8px" alt="${item.alt || ''}">
      <div style="flex:1">
        <div style="font-weight:600">${item.name}</div>
        <div class="small">${item.variant} ‚Ä¢ Qty: ${item.qty}</div>
        <div>‚Çπ${item.price * item.qty}</div>
      </div>
      <button class="btn-ghost" data-remove="${index}">X</button>
    `;
    cartItems.appendChild(div);
  });

  const state = document.getElementById('state').value;
  let shipping = computeShipping(subtotal, totalQty);

  const discount = calculateDiscount(subtotal, totalQty);

  cartSubtotalEl.textContent = subtotal.toFixed(2);
  cartDiscountEl.textContent = discount.toFixed(2);
  cartShippingEl.textContent = shipping.toFixed(2);
  cartTotalEl.textContent = (subtotal - discount + shipping).toFixed(2);
  cartCount.textContent = totalQty;

  document.querySelectorAll('[data-remove]').forEach(btn => {
    btn.addEventListener('click', () => {
      const i = Number(btn.dataset.remove);
      cart.splice(i,1);
      renderCart();
    });
  });
}

document.getElementById('clearCart').addEventListener('click', () => {
  cart = [];
  renderCart();
});

document.getElementById('addCart').addEventListener('click', () => {
  const variant = selectedVariant.textContent.trim();
  const price = Number(selectedVariant.dataset.price);
  const qty = Math.max(1, Number(qtyInput.value));
  const sku = selectedVariant.dataset.sku;

  cart.push({
    name: 'Ammu Organics Sprouted Ragi Flour',
    variant,
    price,
    qty,
    sku,
    image: slides[0].src,
    alt: slides[0].alt
  });

  renderCart();
  cartDrawer.classList.add('open');
});

/* ========== Checkout via WhatsApp (Cart) ========== */
document.getElementById('checkoutWhatsApp').addEventListener('click', () => {
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }

  const name = document.getElementById('custName').value.trim();
  const phone = document.getElementById('custPhone').value.trim();
  const country = document.getElementById('country').value;
  const state = document.getElementById('state').value;
  const city = document.getElementById('city').value.trim();
  const pin = document.getElementById('pincode').value.trim();
  const addr = document.getElementById('address').value.trim();

  if(!name || !phone || !city || !pin || !addr){
    alert("Please fill all customer details");
    return;
  }

  let message = `*Ammu Organics ‚Äì New Order*%0A%0A`;
  cart.forEach((c,i) => {
    message += `${i+1}. ${c.name} (${c.variant}) x ${c.qty} = ‚Çπ${(c.price * c.qty).toFixed(2)}%0A`;
  });

  const subtotal = Number(cartSubtotalEl.textContent);
  const discount = Number(cartDiscountEl.textContent || 0);
  const ship = Number(cartShippingEl.textContent);
  const total = Number(cartTotalEl.textContent);

  message += `%0A*Subtotal:* ‚Çπ${subtotal.toFixed(2)}`;
  message += `%0A*Discount:* -‚Çπ${discount.toFixed(2)}`;
  message += `%0A*Shipping:* ‚Çπ${ship.toFixed(2)}`;
  message += `%0A*Total:* ‚Çπ${total.toFixed(2)}`;

  message += `%0A%0A*Customer:* ${name}`;
  message += `%0A*Phone:* ${phone}`;
  message += `%0A*Country:* ${country}`;
  message += `%0A*State:* ${state}`;
  message += `%0A*City:* ${city}`;
  message += `%0A*Pincode:* ${pin}`;
  message += `%0A*Address:* ${addr}`;

  window.open(`https://wa.me/919629575552?text=${message}`, '_blank');
});

/* ========== BUY NOW ‚Üí Auto WhatsApp (Single Item) ========== */
document.getElementById('buyNow').addEventListener('click', () => {
  const variantText = selectedVariant ? selectedVariant.textContent.trim() : 'Default';
  const sku = selectedVariant ? selectedVariant.dataset.sku : '';
  const qty = Math.max(1, Number(qtyInput.value || 1));
  const priceEach = Number(selectedVariant.dataset.price);
  const subtotal = priceEach * qty;

  const name = document.getElementById('custName').value.trim();
  const phone = document.getElementById('custPhone').value.trim() || '919629575552';
  const country = document.getElementById('country').value;
  const state = document.getElementById('state').value;
  const city = document.getElementById('city').value;
  const pincode = document.getElementById('pincode').value;
  const address = document.getElementById('address').value;

  const discount = calculateDiscount(subtotal, qty);
  const shipping = computeShipping(subtotal, qty);
  const total = subtotal - discount + shipping;

  let msg = `üõí *Ammu Organics - Order Request*%0A%0A`;
  msg += `*Product:* Ammu Organics Sprouted Ragi Flour%0A`;
  msg += `*Variant:* ${variantText}%0A`;
  msg += `*SKU:* ${sku}%0A`;
  msg += `*Quantity:* ${qty}%0A`;
  msg += `*Price (each):* ‚Çπ${priceEach}%0A`;
  msg += `*Subtotal:* ‚Çπ${subtotal.toFixed(2)}%0A`;
  if(discount>0) msg += `*Discount:* -‚Çπ${discount.toFixed(2)}%0A`;
  msg += `*Shipping:* ‚Çπ${shipping.toFixed(2)}%0A`;
  msg += `*Total:* ‚Çπ${total.toFixed(2)}%0A%0A`;
  msg += `*Customer Details*%0AName: ${name}%0APhone: ${phone}%0AAddress: ${address}, ${city}, ${state}, ${pincode}, ${country}%0A%0APlease confirm the order.`;

  const waPhone = (phone && phone.match(/^\d+$/)) ? phone : '919629575552';
  const url = `https://wa.me/${waPhone}?text=${msg}`;

  window.open(url, '_blank');
});

/* Brand logo -> home */
document.getElementById('brandLogo').addEventListener('click', ()=>{ window.location.href = 'index.html'; });

/* keyboard support for thumbs */
thumbs.addEventListener('keydown', e=>{ if(e.key==='ArrowRight') next(); if(e.key==='ArrowLeft') prev(); });

/* initial UI */
updateShippingInfo();
updateDiscountInfo();
renderCart();
</script>

</body>
</html>
